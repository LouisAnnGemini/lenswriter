# LensWriter 功能说明书

LensWriter 是一款专为作家和创作者设计的非线性写作工具，它通过独特的“透镜 (Lens)”系统，帮助您在写作过程中捕捉灵感、管理设定、追踪伏笔，并解决创作冲突。

## 1. 作品管理 (Works)

在左侧边栏，您可以管理您的所有创作项目。

*   **创建作品**：在底部的输入框中输入新作品的名称，按回车键即可创建。
*   **切换作品**：点击列表中的作品名称，即可切换到该作品的编辑界面。
*   **重命名作品**：
    *   将鼠标悬停在作品名称上，点击出现的**铅笔图标**。
    *   或者直接**双击**作品名称。
    *   输入新名称后，按回车键或点击外部即可保存。
*   **删除作品**：
    *   将鼠标悬停在作品名称上，点击出现的**垃圾桶图标**。
    *   系统会显示红色的 **DELETE?** 提示，点击 **✓ (确认)** 将彻底删除该作品及其所有内容（章节、场景、角色等），点击 **✕ (取消)** 则放弃操作。
*   **排序作品**：按住作品名称左侧的**六点抓取图标**，上下拖动即可调整作品顺序。
*   **导入/导出**：
    *   **Export (导出)**：点击底部的 Export 按钮，将所有作品数据导出为 `.json` 文件备份。
    *   **Import (导入)**：点击底部的 Import 按钮，选择之前导出的 `.json` 文件，恢复数据。

## 2. 写作界面 (Writing Tab)

这是您进行创作的主要区域，包含章节列表和编辑器。

### 2.1 章节与场景管理
*   **创建章节**：点击左侧章节列表底部的 "+ New Chapter" 按钮。
*   **创建场景**：在某个章节下，点击 "+ New Scene" 按钮。
*   **重命名**：双击章节或场景名称进行重命名。
*   **排序**：拖动章节或场景标题，可以调整它们的顺序。场景也可以在不同章节之间拖动。
*   **删除**：
    *   选中章节或场景后，在右侧编辑器顶部的标题栏右侧，点击**垃圾桶图标**进行删除。
    *   删除章节会连同其下的所有场景一起删除，请谨慎操作。

### 2.2 文本编辑
*   **普通文本**：在编辑器中直接输入文本。每个段落都是一个独立的块 (Block)。
*   **添加 Lens (透镜)**：
    *   将鼠标悬停在两个段落之间，点击出现的 **+** 号。
    *   选择 **Add Lens**，然后选择一种颜色。
    *   Lens 是一个带有颜色的文本框，用于标记特殊内容。

### 2.3 Lens (透镜) 系统
Lens 是本作的核心功能，用于在正文中嵌入元数据、设定或思考。

*   **颜色分类**：
    *   🔴 **Red (冲突/问题)**：标记剧情漏洞、逻辑矛盾或需要修改的地方。
    *   🔵 **Blue (设定/世界观)**：标记关于世界观、魔法系统或科技的设定。
    *   🟢 **Green (伏笔/线索)**：标记埋下的伏笔或重要线索。
    *   🟡 **Yellow (灵感/备注)**：记录突发的灵感或备忘录。
    *   🟣 **Purple (角色发展)**：标记角色的心理变化或重要时刻。
    *   ⚫ **Black (隐藏内容)**：**特殊功能**。用于隐藏剧透或暂时不想看到的内容。
        *   **隐藏逻辑**：黑色 Lens 中的文字默认是**透明/隐藏**的。
        *   **查看逻辑**：只有当您点击黑色 Lens 的输入框（获得焦点）时，文字才会显示出来。

*   **Lens 操作**：
    *   **切换颜色**：点击 Lens 左上角的颜色圆点，可以随时更改 Lens 的颜色。
    *   **移除 Lens**：点击右上角的垃圾桶图标，可以将 Lens 移除，但**保留其中的文本**（变回普通文本块）。
    *   **链接 Lens**：
        *   点击 Lens 右上角的链接图标，可以选择其他 Lens 进行关联。
        *   关联后，底部会出现跳转按钮，点击可快速跳转到相关的 Lens。
        *   如果关联的是黑色 Lens，按钮上会显示 "Hidden Content" 以防剧透。

## 3. 角色管理 (Characters Tab)

在顶部的 **Characters** 标签页中，您可以管理作品中的角色。

*   **添加角色**：点击 "+ Add Character" 按钮。
*   **编辑角色**：点击角色卡片，可以编辑姓名、描述和头像颜色。
*   **排序角色**：拖动角色卡片可以调整顺序。
*   **场景关联**：
    *   在写作界面 (Writing) 的右侧边栏（点击右上角的 **<** 展开），可以看到所有角色。
    *   勾选角色，将其关联到当前场景。
    *   关联后，可以为该角色在当前场景中添加特定备注（例如：心情、状态）。

## 4. 透镜概览 (Lenses Tab)

在顶部的 **Lenses** 标签页中，您可以查看全书所有的 Lens，进行全局梳理。

*   **瀑布流展示**：所有 Lens 以卡片形式展示，包含位置信息（章节 > 场景）。
*   **筛选功能**：
    *   **按章节筛选**：选择特定章节，只显示该章节（及其子场景）下的 Lens。
    *   **按颜色筛选**：只显示特定颜色的 Lens（例如只看所有红色的冲突点）。
*   **详情编辑**：
    *   点击任意 Lens 卡片，右侧会弹出详情面板。
    *   **编辑内容**：可以直接修改 Lens 的正文内容。
    *   **私有笔记 (Private Notes)**：在这里可以添加**仅在详情页可见**的备注，不会显示在写作界面的正文中。
    *   **管理链接**：可以添加或移除与其他 Lens 的关联。
*   **黑色 Lens 支持**：
    *   在概览列表中，黑色 Lens 的内容会被隐藏，显示为 "Hidden Content"。
    *   点击进入详情面板后，点击文本框才能查看真实内容。

## 5. 专注模式 (Focus Mode)

*   点击界面左下角的 **全屏图标** 进入专注模式。
*   专注模式下，左侧边栏和顶部导航栏会隐藏，只保留编辑器，为您提供沉浸式的写作体验。
*   再次点击左下角的图标即可退出专注模式。
